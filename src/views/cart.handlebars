<h1>Carrito</h1>

{{#if cart.products.length}}
  <ul>
    {{#each cart.products}}
      <li style="margin-bottom:.5rem;">
        <strong>{{this.product.title}}</strong> — ${{this.product.price}} — Cantidad: {{this.quantity}}

        <form action="/api/carts/{{../cart._id}}/products/{{this.product._id}}?_method=PUT" method="post" style="display:inline;">
          <input type="number" name="quantity" min="1" value="{{this.quantity}}" />
          <button type="submit">Actualizar</button>
        </form>

        <form action="/api/carts/{{../cart._id}}/products/{{this.product._id}}?_method=DELETE" method="post" style="display:inline;">
          <button type="submit">Eliminar</button>
        </form>
      </li>
    {{/each}}
  </ul>

  <form action="/api/carts/{{cart._id}}?_method=DELETE" method="post">
    <button type="submit">Vaciar carrito</button>
  </form>
{{else}}
  <p>El carrito está vacío.</p>
{{/if}}

<p><a href="/products?cid={{cart._id}}">« Seguir comprando</a></p>
